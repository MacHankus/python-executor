(()=>{"use strict";var e={127:e=>{e.exports=require("express")},622:e=>{e.exports=require("path")}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=require("@babel/runtime/helpers/asyncToGenerator");var t=n.n(e);const r=require("@babel/runtime/regenerator");var a=n.n(r);const o=require("react");var i=n.n(o);const l=require("react-dom/server");var c=n.n(l);const s=require("react-router");function u(e){var t=e.injection;return i().createElement("html",{lang:"en"},i().createElement("head",null,i().createElement("meta",{charSet:"UTF-8"}),i().createElement("meta",{name:"description",content:"App for sql tasks organize"}),i().createElement("meta",{name:"keywords",content:"SQL, Python, Application, Management"}),i().createElement("meta",{name:"author",content:"Maciej Hankus"}),i().createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),i().createElement("title",null,"SQL Organizer")),i().createElement("body",null,i().createElement("div",{id:"app",dangerouslySetInnerHTML:{__html:t},className:""}),i().createElement("script",{type:"text/javascript",src:"/public/js/app.main.js"})))}const m=require("@material-ui/core/styles"),d=require("react-router-dom"),p=require("@babel/runtime/helpers/classCallCheck");var f=n.n(p);const h=require("@babel/runtime/helpers/createClass");var v=n.n(h);const g=require("@babel/runtime/helpers/inherits");var E=n.n(g);const y=require("@babel/runtime/helpers/possibleConstructorReturn");var b=n.n(y);const k=require("@babel/runtime/helpers/getPrototypeOf");var x=n.n(k),w="SET_PROCESS",S="SET_RUN",C="START_LOADING",q="STOP_LOADING";function T(){return{type:q,payload:!1}}const _=require("react-redux");var N=function(e){E()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x()(t);if(n){var a=x()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return b()(this,e)});function a(){return f()(this,a),r.apply(this,arguments)}return v()(a,[{key:"componentDidMount",value:function(){this.props.stopLoadingHandle()}},{key:"render",value:function(){return i().createElement(i().Fragment,null)}}]),a}(i().Component);const I=(0,_.connect)(null,(function(e){return{stopLoadingHandle:function(){e(T())}}}))(N),B=require("@babel/runtime/helpers/slicedToArray");var R=n.n(B);const M=require("@material-ui/core/AppBar");var L=n.n(M);const P=require("@material-ui/core/Toolbar");var j=n.n(P);const D=require("@material-ui/core/colors/grey");var O=n.n(D);const G=require("@material-ui/core"),z=require("@material-ui/icons/Menu");var F=n.n(z);const A=require("@babel/runtime/helpers/defineProperty");var U=n.n(A);const H=require("clsx");var W=n.n(H);const Y=require("@material-ui/core/SwipeableDrawer");var K=n.n(Y);const X=require("@material-ui/core/List");var J=n.n(X);const Q=require("@material-ui/core/Divider");var V=n.n(Q);const Z=require("@material-ui/core/ListItem");var $=n.n(Z);const ee=require("@material-ui/core/ListItemIcon");var te=n.n(ee);const ne=require("@material-ui/core/ListItemText");var re=n.n(ne);const ae=require("react-pose");var oe=n.n(ae),ie={padding:"8px 16px 8px 16px",position:"relative","&:hover":{cursor:"pointer"}},le=(0,m.makeStyles)((function(){return{text:{fontSize:"0.7rem"},button:ie}})),ce=(0,m.makeStyles)((function(){return{text:{fontSize:"0.810rem"},button:ie}})),se=(0,m.makeStyles)((function(){return{text:{fontSize:"0.875rem"},button:ie}})),ue=(0,m.makeStyles)({fromRight:{bottom:0,right:0,height:2,position:"absolute",background:O()[700]},fromLeft:{bottom:0,left:0,height:2,position:"absolute",background:O()[700]},fromCenter:{bottom:0,left:"50%",transform:"translate(-50%,-50%)",height:2,position:"absolute",background:O()[700]}}),me=oe().span({default:{width:"0%",transition:{duration:300}},clicked:{width:"100%",transition:function(e){return{duration:e.animate?300:0}}}});const de=function(e){var t=e.size,n=void 0===t?"small":t,r=e.variant,a=void 0===r?"fromCenter":r,o=e.children,l=e.selfManage,c=void 0===l||l,s=e.clicked,u=e.onClick,m=e.animate,d=void 0===m||m,p=i().useState(!1),f=R()(p,2),h=f[0],v=f[1],g={small:le(),medium:ce(),big:se()},E=ue(),y=(c?h:s)?"clicked":"default";return i().createElement("button",{className:g[n].button,onClick:c?function(){v(!h)}:function(t){return u(t,{selfClicked:h},e,o)}},i().createElement("span",{className:g[n].text},o),i().createElement(me,{className:E[a],pose:y,animate:d}))},pe=require("@material-ui/core/Grid");var fe=n.n(pe);const he=require("@material-ui/icons/EmojiObjects");var ve=n.n(he);const ge=require("@material-ui/icons/Timeline");var Ee=n.n(ge);require("@babel/runtime/helpers/wrapNativeSuper");Error;var ye=(0,m.makeStyles)({list:{width:250},fullList:{width:"auto"}});function be(e){var t=ye(),n=function(e,t){if("undefined"==typeof window)return null;if(!window.localStorage)return console.error("localStorage is not supported for this browser."),null;var n,r=window.localStorage.getItem("preferences")||"{}";try{n=JSON.parse(r)}catch(e){return null}return n.drawerPosition}(),r=i().useState(n||"left"),a=R()(r,2),o=a[0],l=a[1],c=e.toggleDrawer,s=e.open,u=function(e){return function(){!function(e,t,n){if("undefined"!=typeof window)if(window.localStorage){var r,a=window.localStorage.getItem(e)||"{}";try{r=JSON.parse(a)}catch(e){return}var o=Object.assign({},r,U()({},"drawerPosition",n));window.localStorage.setItem(e,JSON.stringify(o))}else console.error("localStorage is not supported for this browser.")}("preferences",0,e),l(e)}};return i().createElement("div",null,i().createElement(i().Fragment,{key:o},i().createElement(K(),{anchor:o,open:s,onClose:c(!1),onOpen:c(!0)},i().createElement(fe(),{container:!0},["left","right","top","bottom"].map((function(e){return i().createElement(fe(),null,i().createElement(de,{variant:"fromRight",key:e,selfManage:!1,animate:!1,onClick:u(e),clicked:o===e},e))}))),function(e){return i().createElement("div",{className:W()(t.list,U()({},t.fullList,"top"===e||"bottom"===e)),role:"presentation",onClick:c(!1),onKeyDown:c(!1)},i().createElement(J(),null,[{name:"Process",icon:ve()}].map((function(e,t){return i().createElement($(),{button:!0,key:e.name},i().createElement(te(),null," ",i().createElement(e.icon,null)," "),i().createElement(re(),{primary:e.name}))}))),i().createElement(V(),null),i().createElement(J(),null,[{name:"Statistics",icon:Ee()}].map((function(e,t){return i().createElement($(),{button:!0,key:e.name},i().createElement(te(),null,i().createElement(e.icon,null)),i().createElement(re(),{primary:e.name}))}))))}(o))))}var ke=(0,m.makeStyles)({bar:{borderBottom:"1px solid "+O()[300],boxShadow:"none"},divider:{marginLeft:"5px",marginRight:"5px"}});const xe=function(e){var t=ke(),n=(0,o.useState)(!1),r=R()(n,2),a=r[0],l=r[1],c=function(e){return function(){l(e)}};return i().createElement(L(),{position:"fixed",className:t.bar,color:"default",size:"small"},i().createElement(j(),null,i().createElement(fe(),{container:!0,alignItems:"flex-start"},i().createElement(G.IconButton,{onClick:c(!0)},i().createElement(F(),null)),i().createElement(V(),{className:t.divider,orientation:"vertical",flexItem:!0}))),i().createElement(be,{open:a,toggleDrawer:c}))},we=require("@material-ui/core/CircularProgress");var Se=n.n(we),Ce=(0,m.makeStyles)((function(e){return{root:{position:"fixed",width:"100%",height:"100%",zIndex:1e4},spinner:{left:"50%",top:"50%",transform:"translate(-50%, -50%)",position:"absolute",zIndex:1e4},fakeBackground:{background:O()[50],opacity:"0.4",width:"100%",height:"100%"},rootGrid:{height:"100%",width:"100%",position:"relative"},bottom:{color:e.palette.grey[400],position:"absolute"},top:{color:"#1a90ff",animationDuration:"550ms"},circle:{strokeLinecap:"round"}}}));function qe(){var e=Ce();return i().createElement("div",{className:e.root},i().createElement(G.Box,{className:e.fakeBackground}),i().createElement(G.Box,{className:e.spinner},i().createElement(Se(),{variant:"determinate",className:e.bottom,size:40,thickness:4,value:100}),i().createElement(Se(),{variant:"indeterminate",disableShrink:!0,className:e.top,classes:{circle:e.circle},size:40,thickness:4})))}const Te=require("@material-ui/core/Table");var _e=n.n(Te);const Ne=require("@material-ui/core/TableBody");var Ie=n.n(Ne);const Be=require("@material-ui/core/TableCell");var Re=n.n(Be);const Me=require("@material-ui/core/TableContainer");var Le=n.n(Me);const Pe=require("@material-ui/core/TableHead");var je=n.n(Pe);const De=require("@material-ui/core/TableRow");var Oe=n.n(De);const Ge=require("@material-ui/core/Paper");var ze=n.n(Ge);const Fe=require("@material-ui/core/IconButton");var Ae=n.n(Fe);const Ue=require("@material-ui/icons/KeyboardArrowDown");var He=n.n(Ue);const We=require("@material-ui/icons/KeyboardArrowUp");var Ye=n.n(We);const Ke=require("@babel/runtime/helpers/extends");var Xe=n.n(Ke);const Je=require("@material-ui/core/Dialog");var Qe=n.n(Je);const Ve=require("@material-ui/core/DialogTitle");var Ze=n.n(Ve);const $e=require("@material-ui/core/Typography");var et=n.n($e);const tt=require("@babel/runtime/helpers/objectWithoutProperties");var nt=n.n(tt),rt=(0,m.makeStyles)((function(e){return{rootGrey:{borderRadius:"2px",color:"white",padding:"3px 6px 3px 6px",display:"block",background:O()[800]},rootTransparent:{borderRadius:"2px",color:O()[800],padding:"3px 6px 3px 6px",display:"block",background:"transparent"}}}));const at=function(e){e.variant;var t=e.color,n=e.children,r=nt()(e,["variant","color","children"]),a=rt();return i().createElement(et(),Xe()({variant:"caption"},r,{className:"grey"===t?a.rootGrey:a.rootTransparent}),n)},ot=require("@material-ui/core/DialogContent");var it=n.n(ot);const lt=require("@material-ui/core/DialogContentText");var ct=n.n(lt),st=(0,G.makeStyles)((function(e){return{dialog:{padding:e.spacing(1)},title:{fontSize:"0.8rem"}}}));const ut=function(e){var t=e.onClose,n=e.title,r=e.open,a=e.children,o=e.sign,l=st();return i().createElement(Qe(),{onClose:t,"aria-labelledby":"simple-dialog-title",open:r,className:l.dialog},i().createElement(Ze(),null,i().createElement(fe(),{container:!0,alignItems:"center",justify:"flex-start",spacing:2},i().createElement(fe(),{item:!0},i().createElement(at,null,o)),i().createElement(fe(),{item:!0},i().createElement(et(),{id:"simple-dialog-title",className:l.title},n)))),i().createElement(V(),null),i().createElement(it(),null,i().createElement(ct(),null,a)))};var mt=(0,m.makeStyles)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(.7),paddingBottom:e.spacing(.7)}}}));const dt=function(e){var t=mt(),n=i().useState(!1),r=R()(n,2),a=r[0],o=r[1],l=i().useState(!1),c=R()(l,2),s=c[0],u=c[1],m=function(){s&&o(!0)},d=function(e){o(!1)};return i().createElement(G.TableCell,Xe()({size:"small"},e,{className:e.className+" "+t.root}),i().Children.map(e.children,(function(t,n){return e.cutTextToIndex&&"string"==typeof t?(s||u(!0),i().createElement(i().Fragment,null,i().createElement("span",{style:{cursor:s?"help":"initial"},onClick:m},t.substring(0,e.cutTextToIndex)+"..."),i().createElement(ut,{open:a,onClose:d,title:e.dialogTitle,sign:e.id},e.children))):t})))},pt=require("@material-ui/core/Box");var ft=n.n(pt);const ht=function(e){var t=e.children,n=e.onChange,r=e.value;return i().createElement("div",null,i().Children.map(t,(function(e,t){return i().cloneElement(e,{onClick:function(){n(t)},clicked:t===r})})))},vt=require("@babel/runtime/helpers/assertThisInitialized");var gt=n.n(vt),Et=(0,m.makeStyles)((function(e){return{root:{display:"flex"}}}));function yt(){var e=Et();return i().createElement("div",{className:e.root},i().createElement(Se(),null))}var bt=function(e){E()(l,e);var n,r,o=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x()(n);if(r){var a=x()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return b()(this,e)});function l(){var e;f()(this,l);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=o.call.apply(o,[this].concat(r)),U()(gt()(e),"state",{resourceLoaded:!1,data:null,isError:!1,errorMsg:null}),U()(gt()(e),"load",t()(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.resource;case 3:if((n=t.sent).ok){t.next=10;break}if(404!==n.status){t.next=8;break}return e.setState({isError:!0,errorMsg:"Not Found",resourceLoaded:!0}),t.abrupt("return");case 8:return e.setState({isError:!0,errorMsg:n.statusText,resourceLoaded:!0}),t.abrupt("return");case 10:return t.next=12,n.json();case 12:r=t.sent,e.setState({resourceLoaded:!0,data:r}),t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(0),e.setState({isError:!0,errorMsg:"Something wrong during data load. Please try again."}),t.abrupt("return");case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))),e}return v()(l,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return console.log(this.state),this.state.resourceLoaded||this.state.isError?this.state.isError?this.props.errorRender?this.props.errorRender(this.state.errorMsg):i().createElement("div",null,this.state.errorMsg):this.props.render(this.state.data):this.props.waitingComponent?this.props.waitingComponent:i().createElement(yt,null)}}]),l}(i().Component),kt=(0,G.makeStyles)({root:{width:"auto",border:"1px solid ".concat(O()[200])}});function xt(e){var t=e.small,n=e.rows,r=e.headers,a=e.options,o=void 0===a?{}:a,l=e.columnAsKey,c=kt();return i().createElement(_e(),{size:"small","aria-label":"purchases",className:c.root},i().createElement(je(),null,i().createElement(Oe(),{style:{background:o.thBackground?o.thBackground:null}},r.map((function(e){if(t)return i().createElement(Re(),{key:e},e)})))),i().createElement(Ie(),null,n.map((function(e,t){return i().createElement(Oe(),{key:e[l],style:{background:t%2>0?o.trBackground:null}},r.map((function(t){return i().createElement(dt,{key:t,component:"td",scope:"row",align:"right"},e[t])})))}))))}var wt="http://localhost:5000/api",St=function(e){return"".concat(wt,"/processes/").concat(e,"/queues")},Ct=function(e){return"".concat(wt,"/processes/").concat(e,"/tasks")},qt=function(e){return"".concat(wt,"/processes/").concat(e,"/errors")},Tt=function(e){return"".concat(wt,"/processes/").concat(e,"/runs")};function _t(e){var t=e.id;return i().createElement(i().Fragment,null,i().createElement(bt,{resource:fetch(Ct(t),{headers:{"Content-Type":"application/json"},mode:"cors"}),render:function(e){var t=e.tasks;return i().createElement(G.Box,{mb:2},i().createElement(xt,{options:{thBackground:O()[200],trBackground:O()[100]},small:!0,headers:["id","file_path","code","function","arguments"],rows:t,columnAsKey:"id"}))}}))}function Nt(e){var t=e.id;return i().createElement(i().Fragment,null,i().createElement(bt,{resource:fetch(St(t),{headers:{"Content-Type":"application/json"},mode:"cors"}),render:function(e){var t=e.queues;return i().createElement(G.Box,{mb:2},i().createElement(xt,{options:{thBackground:O()[200],trBackground:O()[100]},small:!0,headers:["id","name","run_order","blocking"],rows:t}))}}))}var It=["id","run_id","subject","id_subject","create_date","start_date","end_date","error_msg"];function Bt(e){var t=e.id;return i().createElement(i().Fragment,null,i().createElement(bt,{resource:fetch(qt(t),{headers:{"Content-Type":"application/json"},mode:"cors"}),render:function(e){var t=e.errors;return i().createElement(G.Box,{mb:2},i().createElement(xt,{options:{thBackground:O()[200],trBackground:O()[100]},small:!0,headers:It,rows:t}))}}))}function Rt(e){var t=e.id;return i().createElement(i().Fragment,null,i().createElement(bt,{resource:fetch(Tt(t),{headers:{"Content-Type":"application/json"},mode:"cors"}),render:function(e){var t=e.runs;return i().createElement(G.Box,{mb:2},i().createElement(xt,{options:{thBackground:O()[200],trBackground:O()[100]},small:!0,headers:["id","start_date","end_date","last_activity_date","success","error_msg"],rows:t}))}}))}var Mt=(0,m.makeStyles)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:500},content:{padding:e.spacing(1)},appBar:{boxShadow:"initial"},collapse:{marginBottom:e.spacing(2),display:"inline-block"}}}));function Lt(e){var t=e.open,n=e.id,r=Mt(),a=i().useState(0),o=R()(a,2),l=o[0],c=o[1];return i().createElement(G.Collapse,{in:t,timeout:"auto",unmountOnExit:!0,className:r.collapse},i().createElement(ze(),{elevation:3},i().createElement(L(),{position:"static",color:"transparent",className:r.appBar},i().createElement(ht,{value:l,onChange:function(e){c(e)}},[{text:"task ",id:"task"},{text:"queues",id:"queues"},{text:"errors",id:"errors"},{text:"runs",id:"runs"},{text:"stats",id:"stats"}].map((function(e,t){return i().createElement(de,{selfManage:!1,key:e.id},e.text)})))),i().createElement(ft(),{className:r.content},function(e){return 0===l?i().createElement(_t,{id:e}):1===l?i().createElement(Nt,{id:e}):2===l?i().createElement(Bt,{id:e}):3===l?i().createElement(Rt,{id:e}):void 0}(n))))}var Pt={mouseX:null,mouseY:null},jt=(0,m.makeStyles)((function(e){return{root:{"& > *":{borderBottom:"unset",whiteSpace:"nowrap"},whiteSpace:"nowrap",transition:"0.2s"},cellForCollapsibleContent:{paddingBottom:0,paddingTop:0,border:"initial"},smallCell:{paddingTop:"5px",paddingBottom:"5px"},collapsibleRow:{borderBottom:"1px solid "+O()[200],transition:"0.2s"},backgroundOpen:{background:O()[200]}}}));function Dt(e){var t,n,r=e.row,a=e.headers,o=i().useState(!1),l=R()(o,2),c=l[0],s=l[1],u=jt(),m=i().useState(Pt),d=R()(m,2),p=d[0],f=d[1],h=function(){f(Pt)};return console.log(r),i().createElement(i().Fragment,{key:r.id},i().createElement(Oe(),{key:"stable",component:"tr",hover:!0,id:"process-id-"+r.id,className:W()((t={},U()(t,u.root,!0),U()(t,u.backgroundOpen,c),t)),onContextMenu:function(e){e.preventDefault(),f({mouseX:e.clientX-2,mouseY:e.clientY-4})}},i().createElement(dt,null,i().createElement(Ae(),{"aria-label":"expand row",size:"small",onClick:function(){return s(!c)}},c?i().createElement(Ye(),null):i().createElement(He(),null))),a.map((function(e){return["last_end_date","last_success_date","last_error_date"].includes(e),i().createElement(dt,{key:e,cutTextToIndex:["description","last_error_msg"].includes(e)?25:null,component:"td",scope:"row",dialogTitle:"".concat(e),"data-process-id":r.id,className:u.smallCell},r[e])}))),i().createElement(Oe(),{key:"collapse",className:W()((n={},U()(n,u.collapsibleRow,!0),U()(n,u.backgroundOpen,c),n))},i().createElement(dt,{className:u.cellForCollapsibleContent,colSpan:a.length+1,component:"td",scope:"row"},i().createElement(Lt,{open:c,id:r.id}))),i().createElement(G.Menu,{id:"id-project-table-row-menu-".concat(r.id),open:null!==p.mouseY,onClose:h,anchorReference:"anchorPosition",anchorPosition:null!==p.mouseY&&null!==p.mouseX?{top:p.mouseY,left:p.mouseX}:void 0},i().createElement(G.MenuItem,{key:"disable",onClick:h},"Disable"),i().createElement(G.MenuItem,{key:"playgroung",onClick:h},"Playgroung")))}var Ot=function(e){E()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x()(t);if(n){var a=x()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return b()(this,e)});function a(){return f()(this,a),r.apply(this,arguments)}return v()(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return i().createElement(Le(),{component:ze(),className:t.root},i().createElement(_e(),{"aria-label":"collapsible table"},i().createElement(je(),null,i().createElement(Oe(),null,i().createElement(Re(),null),this.props.headers.map((function(e){return i().createElement(Re(),{key:e,className:t.theadCell},function(e){var t={id:"Id",name:"Name",description:"Description",last_start_date:"Last Start",last_end_date:"Last End",last_success_date:"Last Success",last_error_date:"Last Error",last_error:"Last Error Info",number_of_queues:"Number Of Queues",number_of_tasks:"Number Of Tasks"};if(t[e])return t[e];throw new Error("There is no header [".concat(e,"] defined."))}(e))})))),i().createElement(Ie(),null,this.props.data&&this.props.data.map((function(t){return i().createElement(Dt,{key:t.id,row:t,headers:e.props.headers})})),this.props.loading&&i().createElement(Oe(),null,i().createElement(Re(),{colSpan:this.props.headers.length+1},i().createElement(yt,null))))))}}]),a}(i().Component);const Gt=(0,m.withStyles)((function(e){return{root:{maxHeight:"100%"},theadCell:{fontWeight:"bold"}}}))(Ot),zt=require("@material-ui/core/colors/green");var Ft=n.n(zt);const At=require("@material-ui/core/colors/lightBlue");var Ut=n.n(At);const Ht=require("@material-ui/core/colors/teal");var Wt=n.n(Ht),Yt=oe()(ze())({onHover:{scale:1.05},none:{scale:1}});const Kt=function(e){var t=e.variant,n=void 0===t?"default":t,r=e.color,a=void 0===r?"default":r,o=e.width,l=e.height,c=e.children,s=e.title,u=e.content,m=e.icon,d=(nt()(e,["variant","color","width","height","children","title","content","icon"]),i().useState(!1)),p=R()(d,2),f=p[0],h=p[1],v=function(e,t){var n={default:{},grey:{tile:{background:O()[700],color:"white"}},green:{tile:{background:Ft()[300]}},teal:{tile:{background:Wt()[400],color:"white"}},blue:{tile:{background:Ut()[200]}}},r={small:function(e){return{tile:Object.assign({minWidth:e.spacing(10),height:e.spacing(10),background:O()[500],position:"relative","&:hover":{cursor:"pointer"}},n[t].tile),content:{fontSize:"2rem",fontWeight:"bold"},title:{textTransform:"uppercase"},icon:{position:"absolute",top:0,left:0}}},default:function(e){return{tile:Object.assign({minWidth:e.spacing(15),height:e.spacing(15),position:"relative","&:hover":{cursor:"pointer"}},n[t].tile),content:{fontSize:"2rem",fontWeight:"bold"},title:{textTransform:"uppercase"},icon:{position:"absolute",top:0,left:0}}},big:function(e){return{tile:Object.assign({minWidth:e.spacing(20),height:e.spacing(20),position:"relative","&:hover":{cursor:"pointer"}},n[t].tile),content:{fontSize:"2rem",fontWeight:"bold"},title:{textTransform:"uppercase"},icon:{position:"absolute",top:0,left:0}}},large:function(e){return{tile:Object.assign({minWidth:e.spacing(25),height:e.spacing(25),position:"relative","&:hover":{cursor:"pointer"}},n[t].tile),content:{fontSize:"2rem",fontWeight:"bold"},title:{textTransform:"uppercase"},icon:{position:"absolute",top:0,left:0}}}};return(0,G.makeStyles)(r[e])}(n,a)(),g=function(e){return function(){h(e)}};return i().createElement(Yt,{className:v.tile,style:{height:l,width:o},pose:f?"onHover":"none",onMouseEnter:g(!0),onMouseLeave:g(!1)},i().createElement(ft(),{className:v.icon,p:1},m),i().createElement(ft(),{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},i().createElement(ft(),{mb:1,className:v.content},c||u),i().createElement(ft(),{className:v.title},s)))},Xt=function(e){var t=e.children,n=nt()(e,["children"]);return i().createElement(G.Grid,Xe()({container:!0},n),i().Children.map(t,(function(e){return i().createElement(G.Grid,{item:!0},e)})))},Jt=require("@material-ui/icons/BarChart");var Qt=n.n(Jt);var Vt=function(e){E()(l,e);var n,r,o=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x()(n);if(r){var a=x()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return b()(this,e)});function l(e){var n;return f()(this,l),n=o.call(this,e),U()(gt()(n),"setModifiedUrl",(function(e){n.setState({nextUrl:e})})),U()(gt()(n),"disableEvent",(function(){document.removeEventListener("scroll",n.whenVisible),n.setState({isEmpty:!0})})),U()(gt()(n),"setEvent",(function(){var e=n.props.lazyLoadId;if(!document.getElementById(e))throw Error("There is no element with id [".concat(e,"]."));document.addEventListener("scroll",n.whenVisible)})),U()(gt()(n),"whenVisible",(function(e){if(!(n.state.eventSetTime+100>=e.timeStamp||n.state.loading)){var t=document.getElementById(n.props.lazyLoadId);if(t&&((r=t.getBoundingClientRect()).top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth))){if(!n.state.isError)return n.state.isEmpty?(n.disableEvent(),void console.log("Loading disabled for : ["+n.props.baseUrl+"].")):void n.setState({loading:!0,eventSetTime:e.timeStamp},(function(){return setTimeout((function(){n.state.eventSetTime===e.timeStamp&&n.load()}),50)}));console.log("There is error inside ResourceUsingComponent. Cant load more from "+n.props.baseUrl+".")}}var r})),U()(gt()(n),"load",t()(a().mark((function e(){var t,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.nextUrl?n.state.nextUrl:n.props.baseUrl,e.next=3,fetch(t,n.props.fetchOptions);case 3:return(r=e.sent).ok||n.setState({isError:!0,errorMsg:r.statusText,loading:!1}),e.next=7,r.json();case 7:o=e.sent,n.setState((function(e,t){return{isError:!1,errorMsg:null,data:e.data.concat(o[n.props.envelope]),resourceLoaded:!0,loading:!1,isEmpty:!o._links||!o._links.next,nextUrl:o._links&&o._links.next?o._links.next:null}}));case 9:case"end":return e.stop()}}),e)})))),n.state={isError:!1,errorMsg:null,data:[],actualLoaded:{},resourceLoaded:null,loading:!1,isEmpty:!1,eventSetTime:0,nextUrl:null},n}return v()(l,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},(function(){e.load(),e.setEvent()}))}},{key:"render",value:function(){return console.log(this.state),this.state.resourceLoaded||this.state.isError||!this.props.enableLoader?this.state.isError&&this.state.errorMsg?this.props.errorRender?this.props.errorRender(this.state.errorMsg):i().createElement("div",null,this.state.errorMsg):this.props.render(this.state.data,this.state.loading):this.props.waitingComponent}}]),l}(i().Component);U()(Vt,"defaultProps",{fetchOptions:{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}},waitingComponent:i().createElement(yt,null),enableLoader:!0});const Zt=Vt,$t=require("@babel/runtime/helpers/objectDestructuringEmpty");var en=n.n($t);const tn=require("@material-ui/icons/GetApp");var nn=n.n(tn);const rn=require("@material-ui/icons/ArrowDownward");var an=n.n(rn);const on=function(e){var t=e.children,n=e.onClick,r=e.itemOnClick,a=e.defaultItemClicked,o=i().useState(null!==a||void 0!==a?a:-1),l=R()(o,2),c=l[0],s=l[1],u=function(e){return function(t,a,o,i){s(e),n&&n(t),r&&r(t,a,o,i)}};return i().Children.map(t,(function(e,t){return i().cloneElement(e,{key:t,onClick:u(t),selfManage:!1,clicked:c===t})}))},ln=require("@material-ui/core/TextField");var cn=n.n(ln);const sn=require("@material-ui/core/InputAdornment");var un=n.n(sn);const mn=require("@material-ui/icons/Search");var dn=n.n(mn);const pn=require("@material-ui/pickers"),fn=require("moment");var hn=n.n(fn);const vn=require("@date-io/moment");var gn=n.n(vn);const En=require("@material-ui/styles");var yn=(0,m.makeStyles)((function(e){return{rootTransparent:{textTransform:"uppercase",fontWeight:"bold",borderRadius:"2px",color:O()[800],padding:"3px 6px 3px 6px",display:"block",background:"transparent",lineHeight:"initial"}}}));const bn=function(e){e.variant,e.color;var t=e.children,n=nt()(e,["variant","color","children"]),r=yn();return i().createElement(et(),Xe()({variant:"button"},n,{className:r.rootTransparent}),t)};var kn=(0,G.createMuiTheme)({overrides:{MuiInput:{}}}),xn=(0,G.makeStyles)((function(e){return{rootDiv:{position:"relative"}}}));const wn=function(e){var t=e.onChange,n=(nt()(e,["onChange"]),i().useState(hn()())),r=R()(n,2),a=r[0],o=r[1],l=i().useState(hn()().add(-5,"days")),c=R()(l,2),s=c[0],u=c[1],m=function(e){var t={to:o,from:u};return function(n){t[e](n)}};i().useEffect((function(){t&&t(a,s)}),[a,s]);var d=xn();return i().createElement("div",{className:d.rootDiv},i().createElement(pn.MuiPickersUtilsProvider,{utils:gn()},i().createElement(En.ThemeProvider,{theme:kn},i().createElement(G.Grid,{container:!0,direction:"row",alignItems:"center",justify:"center",spacing:2},i().createElement(G.Grid,{item:!0},i().createElement(bn,null,"from")),i().createElement(G.Grid,{item:!0},i().createElement(pn.DatePicker,{variant:"inline",format:"yyyy-MM-DD",value:s,onChange:m("from")})),i().createElement(G.Grid,{item:!0},i().createElement(bn,null,"to")),i().createElement(G.Grid,{item:!0},i().createElement(pn.DatePicker,{variant:"inline",value:a,format:"yyyy-MM-DD",onChange:m("to")}))))))};var Sn=(0,G.createMuiTheme)({overrides:{MuiInput:{}}}),Cn=(0,G.makeStyles)((function(e){return{rootDiv:{position:"relative"}}}));const qn=function(e){var t=e.onChange,n=nt()(e,["onChange"]),r=i().useState(hn()()),a=R()(r,2),o=a[0],l=a[1];i().useEffect((function(){t&&t(o)}),[o]);var c=Cn();return i().createElement("div",{className:c.rootDiv},i().createElement(pn.MuiPickersUtilsProvider,{utils:gn()},i().createElement(En.ThemeProvider,{theme:Sn},i().createElement(pn.DatePicker,Xe()({variant:"inline",value:o,format:"yyyy-MM-DD",onChange:l},n)))))};var Tn=function(){function e(t,n,r){f()(this,e),U()(this,"operator",void 0),U()(this,"representation",void 0),U()(this,"description",void 0),this.operator=t,this.representation=n,this.description=r}return v()(e,[{key:"toString",value:function(){return this.representation}},{key:"buildFrom",value:function(e,t){return"".concat(e,"=").concat(this.representation,":").concat(t)}}]),e}();const _n=function(){function e(){f()(this,e)}return v()(e,[{key:"like",value:function(){return new Tn("like","like","Implements like filtering with % and _ operators.")}},{key:"regexp",value:function(){return new Tn("regexp","regexp","Implements regexp filtering.")}},{key:"eq",value:function(){return new Tn("=","eq","Implements equality filtering for given value.")}},{key:"gte",value:function(){return new Tn(">=","gte","Implements greater then or equal filtering for given value.")}},{key:"lte",value:function(){return new Tn("<=","lte","Implements less then or equal filtering for given value.")}},{key:"gt",value:function(){return new Tn(">","gt","Implements greater then filtering for given value.")}},{key:"lt",value:function(){return new Tn("<","lt","Implements less then filtering for given value.")}}]),e}();(0,G.makeStyles)((function(e){return{rootDiv:{position:"relative"}}}));const Nn=DatePickerInput;var In=new _n;const Bn=function(e){e.onChange;var t=e.name,n=i().useState(0),r=R()(n,2),a=r[0],o=(r[1],i().useState(null)),l=R()(o,2),c=l[0],s=l[1],u=[In.like(),In.eq()],m=function(){s(null)};return i().createElement("div",null,i().createElement(G.Grid,{container:!0,justify:"center",alignItems:"center"},i().createElement(G.Grid,{item:!0},i().createElement(bn,null,t)),i().createElement(G.Grid,{item:!0},i().createElement(at,{color:"grey"}," ",u[a].representation," ")),i().createElement(G.Grid,{item:!0},i().createElement(Nn,null))),i().createElement(Menu,{id:"id-apitextinput-"+t,anchorEl:c,keepMounted:!0,open,onClose:function(e){setAnchorEl(e.currentTarget)},PaperProps:{}},u.map((function(e,t){return i().createElement(MenuItem,{key:e.representation,selected:t===a,onClick:m},e)}))))};var Rn=(0,G.makeStyles)((function(e){return{signsContainer:{width:"auto"},container:{padding:e.spacing(2)},nowithContainer:{width:"auto"},collapseContainer:{height:0,overflowY:"hidden"},collapse:{height:"auto"},searchTextField:{width:"300px"}}})),Mn=function(e){var t=e.onCollapseIconClick,n=Rn();return i().createElement(G.Grid,{className:n.container,container:!0,item:!0,direction:"row",justify:"flex-end",spacing:1},i().createElement(G.Grid,{item:!0},i().createElement(cn(),{className:n.searchTextField,id:"id-process-textfield",label:"search",InputProps:{startAdornment:i().createElement(un(),{position:"start"},i().createElement(dn(),null))}})),i().createElement(G.Grid,{item:!0},i().createElement(V(),{orientation:"vertical"})),i().createElement(G.Grid,{className:n.signsContainer,container:!0,item:!0,direction:"row"},i().createElement(on,{defaultItemClicked:0},i().createElement(de,null,"20"),i().createElement(de,null,"30"),i().createElement(de,null,"50"))),i().createElement(G.Grid,{item:!0},i().createElement(V(),{orientation:"vertical"})),i().createElement(G.Grid,{className:n.nowithContainer,container:!0,item:!0,alignItems:"center"},i().createElement(G.Button,{variant:"contained",color:"default",startIcon:i().createElement(nn(),null)},"export excel")),i().createElement(G.Grid,{item:!0},i().createElement(V(),{orientation:"vertical"})),i().createElement(G.Grid,{className:n.nowithContainer,container:!0,item:!0,alignItems:"center"},i().createElement(G.Button,{variant:"contained",color:"default",startIcon:i().createElement(nn(),null)},"export csv")),i().createElement(G.Grid,{item:!0},i().createElement(V(),{orientation:"vertical"})),i().createElement(G.Grid,{className:n.nowithContainer,container:!0,item:!0,alignItems:"center"},i().createElement(Ae(),{"aria-label":"delete",size:"small",onClick:t},i().createElement(an(),{fontSize:"inherit"}))))},Ln=oe()(G.Box)({collapse:{height:"auto"},default:{height:0}}),Pn=function(e){var t=e.collapse,n=Rn();return i().createElement(Ln,{className:n.collapseContainer,pose:t?"collapse":"default"},i().createElement(G.Grid,{className:W()(n.container),container:!0,item:!0,direction:"row",justify:"flex-end"},i().createElement(G.Grid,{item:!0},i().createElement(wn,null)),i().createElement(G.Grid,{item:!0},i().createElement(qn,null)),i().createElement(G.Grid,{item:!0},i().createElement(Bn,{name:"tetname"}))))};const jn=function(e){en()(e);var t=i().useState(!1),n=R()(t,2),r=n[0],a=n[1];return Rn(),i().createElement(G.Box,{width:"100%",my:1},i().createElement(G.Paper,null,i().createElement(G.Grid,{container:!0,direction:"column"},i().createElement(Mn,{onCollapseIconClick:function(){a(!r)}}),i().createElement(Pn,{collapse:r}))))};var Dn=function(e){E()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x()(t);if(n){var a=x()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return b()(this,e)});function a(){return f()(this,a),r.apply(this,arguments)}return v()(a,[{key:"componentDidMount",value:function(){this.props.stopLoadingHandle()}},{key:"render",value:function(){return this.props.classes,i().createElement("div",{id:"project-main",className:"main"},i().createElement(ft(),{display:"flex",justifyContent:"center",width:"100%",boxSizing:!0,my:1},i().createElement(Xt,{justify:"flex-start",spacing:2},i().createElement(Kt,{title:"processes",icon:i().createElement(Qt(),null)},"100"),i().createElement(Kt,{title:"running",icon:i().createElement(Qt(),null)},"64"),i().createElement(Kt,{title:"failed 24h",icon:i().createElement(Qt(),null)},"35"),i().createElement(Kt,{title:"tasks",icon:i().createElement(Qt(),null)},"40"),i().createElement(Kt,{title:"queues",icon:i().createElement(Qt(),null)},"150"))),i().createElement(jn,null),i().createElement(ft(),{my:1},i().createElement(Zt,{baseUrl:"http://localhost:5000/api/processes/stats",envelope:"process_stats",enableLoader:!1,lazyLoadId:"lazy-loading-process-table-id",render:function(e,t){return i().createElement(i().Fragment,null,i().createElement(Gt,{headers:["id","name","description","last_start_date","last_end_date","last_success_date","last_error_date","last_error","number_of_queues","number_of_tasks"],data:e,loading:t}),i().createElement("span",{id:"lazy-loading-process-table-id"}))}})))}}]),a}(i().Component),On=(0,G.withStyles)((function(e){return(0,G.createStyles)({})}))(Dn);const Gn=(0,_.connect)(null,(function(e){return{stopLoadingHandle:function(){e(T())}}}))(On);var zn=(0,m.makeStyles)((function(e){return{root:{height:"100%",width:"100%",position:"relative"}}}));const Fn=(0,_.connect)((function(e){return{loading:e.loading}}),null)((function(e){var t=zn(),n=e.loading;return i().createElement(i().Fragment,null,n.loading?i().createElement(qe,null):null,i().createElement("div",{className:t.root},i().createElement(xe,null),i().createElement(d.Switch,null,i().createElement(d.Route,{exact:!0,path:"/",component:I}),i().createElement(d.Route,{exact:!0,path:"/processes",component:Gn}))))})),An=require("@material-ui/core/CssBaseline");var Un=n.n(An),Hn=(0,m.createMuiTheme)(),Wn=(0,_.connect)((function(e){return{loading:e.loading}}),null)((function(e){return i().createElement(m.MuiThemeProvider,{theme:Hn},i().createElement(pn.MuiPickersUtilsProvider,{utils:gn()},i().createElement(Un(),null),i().createElement(i().Fragment,null,i().createElement(Fn,null))))}));const Yn=(0,s.withRouter)(Wn);var Kn={process:{idProcess:null,idRun:null},loading:{loading:!0}};const Xn=require("redux"),Jn=(0,Xn.combineReducers)({process:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn.process,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object.assign({},e,{idProcess:t.payload});case S:return Object.assign({},e,{idRun:t.payload})}return e},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn.loading,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case q:return Object.assign({},e,{loading:t.payload})}return e}}),Qn=(0,Xn.createStore)(Jn,(0,Xn.applyMiddleware)((function(e){return function(t){return function(n){console.log("dispatching",n);var r=t(n);return console.log("next state",e.getState()),r}}})));var Vn=n(127),Zn=n(622),$n=Vn();$n.use("/public",Vn.static(Zn.join("dist","public"))),$n.get("*",function(){var e=t()(a().mark((function e(t,n,r){var o,l,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.location,l=c().renderToString(i().createElement(_.Provider,{store:Qn},i().createElement(s.StaticRouter,{location:o,context:{}},i().createElement(Yn,null)))),m=c().renderToStaticMarkup(i().createElement(u,{injection:l})),n.send("<!doctype html>".concat(m));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),$n.listen(3e3,(function(){return console.log("Listening on localhost:3000")}))})()})();